<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WoT Duo ‚Äî SaXon vs Devil_484</title>
  <!-- Font Awesome 6 (—Ç–∞–Ω–∫–æ–≤—ñ —ñ–∫–æ–Ω–∫–∏) + Google Font (–º—ñ–ª—ñ—Ç–∞—Ä—ñ —à—Ä–∏—Ñ—Ç) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700;900&family=Roboto+Condensed:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: transparent !important;
      font-family: 'Roboto Condensed', 'Segoe UI', sans-serif;
      color: #eee;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 12px;
    }

    /* –æ—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    .wrap {
      width: 980px;
      display: flex;
      gap: 24px;
      align-items: stretch;
    }

    /* —Å–ø—ñ–ª—å–Ω–∏–π —Å—Ç–∏–ª—å –∫–∞—Ä—Ç–æ–∫ ‚Äî –≤–∞–∂–∫–∏–π –º–µ—Ç–∞–ª, –ø–æ–¥—Ä—è–ø–∏–Ω–∏ */
    .card {
      flex: 1;
      background: #1e1e1e;
      background-image: 
        repeating-linear-gradient(45deg, rgba(255,255,255,0.02) 0px, rgba(255,255,255,0.02) 4px, transparent 4px, transparent 8px),
        radial-gradient(circle at 20% 30%, rgba(210, 180, 140, 0.15) 0%, transparent 40%);
      border-radius: 30px;
      padding: 20px;
      border: 1px solid rgba(255, 215, 0, 0.3);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.8), inset 0 1px 3px rgba(255, 215, 0, 0.3);
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      gap: 16px;
      backdrop-filter: blur(2px);
    }

    /* "–∑–≤–∞—Ä–Ω—ñ —à–≤–∏" –ø–æ –∫—Ä–∞—è—Ö */
    .card::before {
      content: "";
      position: absolute;
      top: 8px; left: 8px; right: 8px; bottom: 8px;
      border: 1px dashed rgba(255, 200, 50, 0.25);
      border-radius: 22px;
      pointer-events: none;
      z-index: 1;
    }

    /* —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏–π –≤—ñ–¥—Ç—ñ–Ω–æ–∫ –¥–ª—è –≥—Ä–∞–≤—Ü—ñ–≤ */
    .card.p1 {
      background-color: #1a2a1a;
      border-color: #7cb342;
    }
    .card.p1 .big .value {
      color: #a5d6a5;
      text-shadow: 0 0 10px #2e7d32;
    }
    .card.p1 .bar i {
      background: linear-gradient(90deg, #558b2f, #aeea00, #558b2f);
    }

    .card.p2 {
      background-color: #2a1a1a;
      border-color: #ff7043;
    }
    .card.p2 .big .value {
      color: #ffab91;
      text-shadow: 0 0 10px #bf360c;
    }
    .card.p2 .bar i {
      background: linear-gradient(90deg, #bf360c, #ff7043, #bf360c);
    }

    /* –≤–µ—Ä—Ö–Ω—è —á–∞—Å—Ç–∏–Ω–∞: –±–µ–π–¥–∂ –∑ –∞–≤–∞—Ç–∞—Ä–æ–º —Ç–∞ –Ω—ñ–∫–Ω–µ–π–º–æ–º */
    .top {
      display: flex;
      align-items: center;
      justify-content: flex-start;
    }

    .badge {
      display: flex;
      align-items: center;
      gap: 12px;
      background: rgba(0, 0, 0, 0.6);
      padding: 8px 16px 8px 10px;
      border-radius: 60px;
      border: 1px solid rgba(255, 215, 0, 0.4);
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.8), 0 2px 0 rgba(255,215,0,0.2);
    }

    .avatar {
      width: 52px;
      height: 52px;
      border-radius: 50%;
      background: #2b2b2b;
      border: 2px solid #b8860b;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      font-size: 2rem;
      color: #ffd966;
      box-shadow: 0 0 15px #ffb300;
    }

    .name {
      display: flex;
      flex-direction: column;
    }

    .name b {
      font-size: 1.8rem;
      font-weight: 900;
      line-height: 1.2;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-family: 'Oswald', sans-serif;
    }

    /* –ø—Ä–æ–≥—Ä–µ—Å-–±–ª–æ–∫ */
    .progress {
      background: rgba(0, 0, 0, 0.7);
      border-radius: 28px;
      padding: 20px;
      border: 1px solid #5a4a2e;
      box-shadow: inset 0 5px 10px #00000080;
    }

    .big {
      display: flex;
      align-items: baseline;
      gap: 10px;
      margin-bottom: 10px;
    }

    .big .value {
      font-size: 4.2rem;
      font-weight: 900;
      line-height: 1;
      font-family: 'Oswald', sans-serif;
    }

    .big .unit {
      font-size: 1.1rem;
      font-weight: 700;
      color: #b0b0b0;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* —Å–∞–º –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä ‚Äî —ñ–º—ñ—Ç—É—î —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –±–æ—î–∑–∞–ø–∞—Å—É */
    .bar {
      height: 20px;
      border-radius: 999px;
      background: #111;
      border: 1px solid #5a4a2e;
      box-shadow: inset 0 2px 5px black;
      margin: 10px 0 15px;
      overflow: hidden;
      position: relative;
    }

    .bar i {
      display: block;
      height: 100%;
      width: 0%;
      border-radius: 999px;
      transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 0 15px currentColor;
    }

    /* —Å—ñ—Ç–∫–∞ KPI */
    .grid2 {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 14px;
    }

    .kpi {
      background: rgba(0, 0, 0, 0.6);
      border-radius: 20px;
      padding: 14px 6px;
      text-align: center;
      border: 1px solid #b8860b;
      box-shadow: inset 0 2px 8px black;
    }

    .kpi .label {
      font-size: 0.8rem;
      color: #cfcfcf;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .kpi .val {
      margin-top: 4px;
      font-size: 2.2rem;
      font-weight: 900;
      color: #ffd966;
      line-height: 1.2;
      font-family: 'Oswald', sans-serif;
      text-shadow: 0 0 8px #ff8c00;
    }

    /* –¥–æ–¥–∞—Ç–∫–æ–≤—ñ —Ç–∞–Ω–∫–æ–≤—ñ –¥–µ—Ç–∞–ª—ñ (–≥—É—Å–µ–Ω–∏—Ü—ñ –∑–Ω–∏–∑—É) */
    .card::after {
      content: "‚öôÔ∏è‚öôÔ∏è‚öôÔ∏è";
      position: absolute;
      bottom: 5px;
      right: 15px;
      font-size: 1.5rem;
      opacity: 0.1;
      color: #b8860b;
      transform: rotate(10deg);
      pointer-events: none;
    }

    /* –∞–¥–∞–ø—Ç–∞—Ü—ñ—è */
    @media (max-width: 1000px) {
      .wrap { flex-direction: column; }
    }
  </style>
</head>
<body>

<div class="wrap">

  <!-- –ü–ï–†–®–ò–ô –ì–†–ê–í–ï–¶–¨ ‚Äì SaXon (—Ç—ñ–ª—å–∫–∏ –Ω—ñ–∫) -->
  <div class="card p1">
    <div class="top">
      <div class="badge">
        <div class="avatar">
          <i class="fa-solid fa-binoculars"></i> <!-- –±—ñ–Ω–æ–∫–ª—å -->
        </div>
        <div class="name">
          <b>SaXon</b>
          <!-- –ø—ñ–¥–ø–∏—Å "–†–û–ó–í–Ü–î–ù–ò–ö" –≤–∏–¥–∞–ª–µ–Ω–æ -->
        </div>
      </div>
      <!-- pill –≤–∏–¥–∞–ª–µ–Ω–æ —Ä–∞–Ω—ñ—à–µ -->
    </div>

    <div class="progress">
      <div class="big">
        <div class="value" id="p1_left_big">0</div>
        <div class="unit">–∑–∞–ª–∏—à–∏–ª–æ—Å—å</div>
      </div>

      <!-- –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä (id –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è) -->
      <div class="bar"><i id="p1_bar"></i></div>

      <div class="grid2">
        <div class="kpi">
          <div class="label">–î–æ–¥–∞–ª–∏ –≥–ª—è–¥–∞—á—ñ</div>
          <div class="val" id="p1_added">0</div>
        </div>
        <div class="kpi">
          <div class="label">–í–∏–∫–æ–Ω–∞–Ω–æ</div>
          <div class="val" id="p1_done">0</div>
        </div>
      </div>
    </div>
    <!-- –º–∞–ª–µ–Ω—å–∫–∞ —ñ–∫–æ–Ω–∫–∞ —Ç–∞–Ω–∫–∞ -->
    <div style="position:absolute; bottom:8px; left:12px; opacity:0.15; font-size:2rem;">‚ö°</div>
  </div>

  <!-- –î–†–£–ì–ò–ô –ì–†–ê–í–ï–¶–¨ ‚Äì Devil_484 (—Ç—ñ–ª—å–∫–∏ –Ω—ñ–∫) -->
  <div class="card p2">
    <div class="top">
      <div class="badge">
        <div class="avatar">
          <i class="fa-solid fa-crosshairs"></i> <!-- –ø—Ä–∏—Ü—ñ–ª -->
        </div>
        <div class="name">
          <b>Devil_484</b>
          <!-- –ø—ñ–¥–ø–∏—Å "–ó–ê–í–î–ê–ù–ù–Ø –®–ö–û–î–ò" –≤–∏–¥–∞–ª–µ–Ω–æ -->
        </div>
      </div>
      <!-- pill –≤–∏–¥–∞–ª–µ–Ω–æ —Ä–∞–Ω—ñ—à–µ -->
    </div>

    <div class="progress">
      <div class="big">
        <div class="value" id="p2_left_big">0</div>
        <div class="unit">–∑–∞–ª–∏—à–∏–ª–æ—Å—å</div>
      </div>

      <div class="bar"><i id="p2_bar"></i></div>

      <div class="grid2">
        <div class="kpi">
          <div class="label">–î–æ–¥–∞–ª–∏ –≥–ª—è–¥–∞—á—ñ</div>
          <div class="val" id="p2_added">0</div>
        </div>
        <div class="kpi">
          <div class="label">–í–∏–∫–æ–Ω–∞–Ω–æ</div>
          <div class="val" id="p2_done">0</div>
        </div>
      </div>
    </div>
    <div style="position:absolute; bottom:8px; left:12px; opacity:0.15; font-size:2rem;">üí•</div>
  </div>

</div>

<!-- –ù–ï –ó–ú–Ü–ù–Æ–Ñ–ú–û –õ–û–ì–Ü–ö–£!  –¢–æ–π —Å–∞–º–∏–π —Å–∫—Ä–∏–ø—Ç, —Ç—ñ —Å–∞–º—ñ ID -->
<script>
const SHEET_ID="17phnEn-NW-OnrZg4DcW65r-Xoq6ScsdVjS5yL0SS3fk";
const GID="621327957";
const URL=`https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=${GID}`;
const REFRESH_MS = 15000;

/* –Ω–æ—Ä–º–∞–ª—å–Ω–∏–π CSV –ø–∞—Ä—Å–µ—Ä (–±–µ–∑ trim, –∑ –ª–∞–ø–∫–∞–º–∏) */
function parseCSV(text){
  const rows = [];
  let row = [], cur = "", inQ = false;

  for(let i=0;i<text.length;i++){
    const ch = text[i];

    if(ch === '"'){
      if(inQ && text[i+1] === '"'){ cur += '"'; i++; }
      else inQ = !inQ;
    } else if(ch === ',' && !inQ){
      row.push(cur); cur = "";
    } else if(ch === '\n' && !inQ){
      if(cur.endsWith('\r')) cur = cur.slice(0,-1);
      row.push(cur);
      rows.push(row);
      row = []; cur = "";
    } else {
      cur += ch;
    }
  }

  // –æ—Å—Ç–∞–Ω–Ω—ñ–π —Ä—è–¥–æ–∫
  if(cur.length || row.length){
    if(cur.endsWith('\r')) cur = cur.slice(0,-1);
    row.push(cur);
    rows.push(row);
  }
  return rows;
}

/* –ø—Ä–∏–±–∏—Ä–∞—î–º–æ –í–°–ï, –∫—Ä—ñ–º —Ü–∏—Ñ—Ä —ñ –º—ñ–Ω—É—Å–∞ */
function toNumber(val){
  if(val === undefined || val === null) return 0;
  const s = String(val).replace(/[^\d\-]/g, ""); // –∑'—ó—Å—Ç—å —ñ –ø—Ä–æ–±—ñ–ª–∏, —ñ NBSP
  const n = parseInt(s, 10);
  return Number.isFinite(n) ? n : 0;
}
const fmt = v => toNumber(v).toLocaleString("uk-UA");

function setBar(bar, done, left){
  const total = Math.max(0, done + left);
  const pct = total > 0 ? Math.max(0, Math.min(100, (done/total)*100)) : 0;
  bar.style.width = pct.toFixed(1) + "%";
}

async function load(){
  const r = await fetch(URL + "&_=" + Date.now());
  const t = await r.text();
  const d = parseCSV(t);

  // row 10 -> index 9; row 12 -> 11; row 14 -> 13
  // col C -> 2; col D -> 3

  const p1_added_v = toNumber(d[9]?.[2]);   // C10
  const p1_done_v  = toNumber(d[11]?.[2]);  // C12
  const p1_left_v  = toNumber(d[13]?.[2]);  // C14

  const p2_added_v = toNumber(d[9]?.[3]);   // D10
  const p2_done_v  = toNumber(d[11]?.[3]);  // D12
  const p2_left_v  = toNumber(d[13]?.[3]);  // D14

  p1_left_big.textContent = fmt(p1_left_v);
  p1_added.textContent    = fmt(p1_added_v);
  p1_done.textContent     = fmt(p1_done_v);
  setBar(p1_bar, p1_done_v, p1_left_v);

  p2_left_big.textContent = fmt(p2_left_v);
  p2_added.textContent    = fmt(p2_added_v);
  p2_done.textContent     = fmt(p2_done_v);
  setBar(p2_bar, p2_done_v, p2_left_v);
}

load().catch(console.log);
setInterval(()=>load().catch(console.log), REFRESH_MS);
</script>

<!-- –£—Å—ñ ID –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—ñ, —Ç–æ–º—É –¥–∞–Ω—ñ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è, —è–∫ —ñ —Ä–∞–Ω—ñ—à–µ -->
</body>
</html>
